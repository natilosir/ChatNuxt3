import{_ as x}from"./BDV1AlzY.js";import{s as y,u as h,r as p,e as b,n as m,c as k,a as s,d as a,f as d,v as f,t as B,b as _,w as c,g as C,o as S}from"./CI--yoU-.js";import{u as V}from"./BhqzRmtz.js";import{p as N,s as v}from"./DSqpYqpb.js";import{c as T}from"./BFgTw9Sf.js";import{S as w}from"./BQIkj5Wb.js";const L={class:"auth-form"},D={class:"form-group"},F={class:"form-group"},M=["disabled"],P={class:"text-center mt-3"},U={class:"text-center"},z={__name:"login",async setup($){let r,i;y("login"),h();const n=p(!1),o=p({username:"",password:""});V({title:"ورود به چت‌لند"}),([r,i]=b(()=>T()),r=await r,i(),r).isLoggedIn===!0&&m("/");const g=async()=>{n.value=!0;try{const e=await N("login",{username:o.value.username,password:o.value.password});e.user.username&&(v("token",e.access_token,365),v("hash",e.user.hash,365),await w.fire({title:"ورود موفق",text:`${e.user.name} عزیز خوش آمدید `,icon:"success",position:"top-end",toast:!0,showConfirmButton:!1,timer:2e3,timerProgressBar:!0,customClass:{popup:"small-swal"}}),m("/"))}catch({data:e,status:t}){w.fire({icon:"error",title:` خطای${t}`,text:e.message,confirmButtonText:"متوجه شدم"})}finally{n.value=!1}};return(e,t)=>{const u=x;return S(),k("div",L,[t[6]||(t[6]=s("h2",null,[a("به چت‌لند خوش آمدید "),s("span",{style:{color:"#FF5555"}},"🎉")],-1)),t[7]||(t[7]=s("p",null,"مشخصات حساب کاربری خود را وارد کنید",-1)),s("form",{onSubmit:C(g,["prevent"])},[s("div",D,[d(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>o.value.username=l),placeholder:"نام کاربری"},null,512),[[f,o.value.username]])]),s("div",F,[d(s("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=l=>o.value.password=l),placeholder:"رمز عبور"},null,512),[[f,o.value.password]])]),s("button",{type:"submit",disabled:n.value},B(n.value?"... در حال ورود":"ورود"),9,M),s("p",P,[t[3]||(t[3]=a(" حساب کاربری ندارید؟ ")),_(u,{to:"/register"},{default:c(()=>t[2]||(t[2]=[a(" ثبت نام کنید")])),_:1,__:[2]})]),s("p",U,[t[5]||(t[5]=a(" رمز عبور خود را فراموش کرده‌اید؟ ")),_(u,{to:"/forgot-password"},{default:c(()=>t[4]||(t[4]=[a("بازیابی رمز")])),_:1,__:[4]})])],32)])}}};export{z as default};
